window.plugin=window.plugin||{},function(){"use strict";var e;plugin.Import=function(){const e=document.getElementById("block-import-output");document.querySelectorAll(".button-import").forEach(t=>{t.addEventListener("click",o=>{o.preventDefault();let r=t.dataset.id;document.body.classList.add("js-import-theme-active"),e.classList.add("block-import-load");const n=new FormData;n.append("action","codegear_import_theme"),n.append("nonce",Codegear_Starter_localize.nonce),n.append("demo_id",r),fetch(Codegear_Starter_localize.ajax_url,{method:"POST",credentials:"same-origin",body:n}).then(e=>e.json()).then(t=>{e.classList.remove("block-import-load"),t&&(e.innerHTML=t.data),t.success&&document.querySelector(".starter-demo-import-close").addEventListener("click",t=>{t.preventDefault(),document.body.classList.remove("js-import-theme-active"),e.innerHTML=""})}).catch(t=>{e.innerHTML="<span>"+Codegear_Starter_localize.failed_message+"</span>"})})}),document.querySelector(".starter-demo-import-start").addEventListener("click",()=>{document.querySelector(".block-import-start").classList.remove("block-import-active"),document.querySelector(".block-import-process").classList.add("block-import-active"),document.querySelector(".block-import-label").innerHTML="0%",document.querySelector(".block--import-progress-indicator").style.setProperty("--app-progress","0%"),plugin.StartImport()})},plugin.StartImport=function(e=0){var t="";let o=document.querySelectorAll(".block--form-step"),r=document.querySelectorAll(".block--form-step")[e],n=o.length;if(e>=n)setTimeout(function(){document.querySelector(".block-import-process").classList.remove("block-import-active"),document.querySelector(".block--import-finish").classList.add("block-import-active")},200);else{var c=new FormData(r);for(let[e,o]of c)if("step_name"==e)t=o;r.querySelector(".starter-checkbox").checked?(document.querySelector(".block--import-progress-label").innerHTML=t,fetch(Codegear_Starter_localize.ajax_url,{method:"POST",credentials:"same-origin",body:c}).then(e=>e.json()).then(t=>{if(t.success)if(void 0!==t.status&&"newAJAX"===t.status)console.log("First:"+e),plugin.StartImport(e);else{if((e+=1)<=n){var o=Math.floor(100/n*e);document.querySelector(".block--import-progress-indicator").style.setProperty("--app-progress",o+"%"),document.querySelector(".block-import-label").innerHTML=o+"%"}plugin.StartImport(e)}else document.getElementById("message_output")&&(document.getElementById("message_output").innerHTML="<span>"+Codegear_Starter_localize.failed_message+"</span>")}).catch(e=>{document.getElementById("message_output")&&(document.getElementById("message_output").innerHTML="<span>"+Codegear_Starter_localize.failed_message+"</span>")})):plugin.StartImport(e+1)}},plugin.init=function(){plugin.Import()},e=function(){plugin.init()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();